<!DOCTYPE html>
<html>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<body  background="tp2.jpg">
</br>
</br>
</br>
   <div style="display:block " class="menu_nva" align="center"  >
   <p><h1>The recording questions and answer</h1></p>
  <input onclick="startRecording()" type="button" value="record" />
  <input onclick="stopRecording()" type="button" value="stop" />
  <input onclick="playRecording()" type="button" value="play" />
  <input onclick="uploadAudio()" type="button" value="submit" />
  <br />
</br>
  <audio id="recordingslist" width="980" height="820" controls="controls" autoplay="autoplay"></audio>  
 
  </br>
<div style="color:#0000FF">
 <p><h3>Warm Tip: When you click the Play button, information such as the play progress time will be displayed.</h3></p>  
 <p><h3>Warm Tip: Recordings can only be resumed when recording is suspended.</h3></p>    
 <p><h3>Warm Tip: Please download in time, otherwise the voice will be overwritten.</h3></p> 
</div>
<script type="text/javascript" src="js/HZRecorder.js"></script>
<script > 
//录音
 var recorder;
            var audio = document.querySelector('audio');
            function startRecording() {
                HZRecorder.get(function(rec) {
                    recorder = rec;
                    recorder.start();
                }, {
                    sampleBits: 16,
                    sampleRate: 16000
                });
            }
            function stopRecording() {
                recorder.stop();
                var blob = recorder.getBlob();
                var url = URL.createObjectURL(blob);
                var div = document.createElement('div');
                var au = document.createElement('audio');
                var hf = document.createElement('a');
                au.controls = true;
                au.src = url;
                hf.href = url;
                hf.download = new Date().toISOString() + '.wav';
                hf.innerHTML = hf.download;
                div.appendChild(au);
                div.appendChild(hf);
                recordingslist.appendChild(div);
            }
            function playRecording() {
                recorder.play(audio);
            }
            function uploadAudio() {
                recorder.upload("Handler1.ashx", function(state, e) {
                    switch(state) {
                        case 'uploading':
                            //var percentComplete = Math.round(e.loaded * 100 / e.total) + '%';
                            break;
                        case 'ok':
                            //alert(e.target.responseText);
                            alert("上传成功");
                            break;
                        case 'error':
                            alert("fail to upload");
                            break;
                        case 'cancel':
                            alert("上传被取消");
                            break;
                    }
                });
            }
</script> 
</body>
</html>